
{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user within the SyllabiQ platform.",
      "properties": {
        "uid": { "type": "string", "description": "Unique identifier for the User entity." },
        "email": { "type": "string", "description": "Email address of the user.", "format": "email" },
        "name": { "type": "string", "description": "Display name of the user." },
        "role": { "type": "string", "description": "Role of the user, one of 'student', 'teacher', or 'admin'.", "enum": ["student", "teacher", "admin"] },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp indicating when the user was created." },
        "lastLogin": { "type": "string", "format": "date-time", "description": "User's last login." },
        "isActive": { "type": "boolean", "description": "Indicates if the user account is active." },
        "profilePicture": { "type": "string", "format": "uri", "description": "URL of the user's profile picture." },
        "studentProfile": {
          "type": "object",
          "properties": {
            "gradeLevel": { "type": "string" },
            "schoolBoard": { "type": "string" },
            "preferredSubjects": { "type": "array", "items": { "type": "string" } },
            "learningGoals": { "type": "string" },
            "interests": { "type": "array", "items": { "type": "string" } },
            "enrolledCourses": { "type": "array", "items": { "type": "string" }, "description": "Array of course IDs the student is enrolled in." }
          }
        },
        "teacherProfile": {
          "type": "object",
          "properties": {
            "subjects": { "type": "array", "items": { "type": "string" } },
            "qualifications": { "type": "array", "items": { "type": "string" } },
            "experienceYears": { "type": "number" },
            "hourlyRate": { "type": "number" },
            "bio": { "type": "string" },
            "availability": {
              "type": "object",
              "properties": {
                "days": { "type": "array", "items": { "type": "string" } },
                "timeSlots": { "type": "array", "items": { "type": "string" } }
              }
            },
            "isVerified": { "type": "boolean" },
            "bankDetails": {
              "type": "object",
              "description": "Bank account details for payouts.",
              "properties": {
                "accountHolderName": { "type": "string" },
                "accountNumber": { "type": "string" },
                "ifscCode": { "type": "string" }
              }
            }
          }
        }
      },
      "required": ["uid", "email", "role", "name", "createdAt", "isActive"]
    },
    "PromoCode": {
        "title": "Promo Code",
        "description": "Represents a promotional code that grants a one-time discount.",
        "type": "object",
        "properties": {
            "code": { "type": "string", "description": "The unique code string." },
            "percentage": { "type": "number", "description": "The discount percentage (e.g., 30 for 30%)." },
            "isActive": { "type": "boolean", "description": "Whether the code is currently active." },
            "usedBy": { "type": "array", "items": { "type": "string" }, "description": "An array of user UIDs who have already used this code." }
        },
        "required": ["code", "percentage", "isActive"]
    },
    "PublicTutorProfile": {
      "title": "Public Tutor Profile",
      "description": "Represents the public-facing, safe-to-display profile of a teacher.",
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "profilePicture": { "type": "string", "format": "uri" },
        "subjects": { "type": "array", "items": { "type": "string" } },
        "hourlyRate": { "type": "number" },
        "availability": {
          "type": "object",
          "properties": {
            "days": { "type": "array", "items": { "type": "string" } },
            "timeSlots": { "type": "array", "items": { "type": "string" } }
          }
        },
        "bio": { "type": "string" }
      },
      "required": ["name"]
    },
    "Course": {
      "title": "Course",
      "description": "Represents a course created by a teacher, containing modules and lessons.",
      "type": "object",
      "properties": {
        "title": { "type": "string" },
        "description": { "type": "string" },
        "category": { "type": "string" },
        "difficulty": { "type": "string", "enum": ["Beginner", "Intermediate", "Advanced"] },
        "price": { "type": "string" },
        "coverImage": { "type": "string", "format": "uri" },
        "imageHint": { "type": "string" },
        "authorId": { "type": "string" },
        "author": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "learningOutcomes": { "type": "array", "items": { "type": "string" }, "description": "List of things students will learn." },
        "modulesCount": { "type": "number" },
        "lessonsCount": { "type": "number" },
        "totalDuration": { "type": "number", "description": "Total course duration in minutes." },
        "previewLessonId": { "type": "string", "description": "ID of the free preview lesson." },
        "hasPracticeQuestions": { "type": "boolean" },
        "hasFinalTest": { "type": "boolean" }
      },
      "required": ["title", "description", "authorId", "author", "createdAt", "price"]
    },
    "Module": {
        "title": "Module",
        "description": "A module within a course, containing several lessons.",
        "type": "object",
        "properties": {
            "title": { "type": "string" },
            "order": { "type": "number" },
            "courseId": { "type": "string" }
        },
        "required": ["title", "order", "courseId"]
    },
    "Lesson": {
        "title": "Lesson",
        "description": "A single lesson within a module.",
        "type": "object",
        "properties": {
            "title": { "type": "string" },
            "order": { "type": "number" },
            "moduleId": { "type": "string" },
            "courseId": { "type": "string" },
            "contentType": { "type": "string", "enum": ["pdf", "video"] },
            "contentUrl": { "type": "string", "format": "uri" },
            "isPreview": { "type": "boolean" },
            "duration": { "type": "number", "description": "Lesson duration in minutes." }
        },
        "required": ["title", "order", "moduleId", "courseId", "contentType", "contentUrl", "duration"]
    },
    "Meeting": {
      "title": "Meeting",
      "type": "object",
      "description": "Represents a meeting session within the SyllabiQ platform.",
      "properties": {
        "meetingCode": { "type": "string", "description": "Unique human-readable code for the meeting." },
        "meetingRoomId": { "type": "string", "description": "Unique identifier for the meeting room (UUID)." },
        "hostUid": { "type": "string", "description": "Reference to the User who is hosting the meeting." },
        "isActive": { "type": "boolean", "description": "Indicates whether the meeting is currently active." },
        "createdAt": { "type": "string", "description": "Timestamp indicating when the meeting was created.", "format": "date-time" }
      },
      "required": ["meetingCode", "meetingRoomId", "hostUid", "isActive", "createdAt"]
    },
    "Participant": {
      "title": "Participant",
      "type": "object",
      "description": "Represents a participant in a meeting.",
      "properties": {
        "uid": { "type": "string", "description": "Reference to the User participating in the meeting." },
        "name": { "type": "string", "description": "Display name of the participant." },
        "role": { "type": "string", "description": "Role of the participant (teacher or student)." },
        "joinedAt": { "type": "string", "description": "Timestamp indicating when the participant joined.", "format": "date-time" },
        "cameraOn": { "type": "boolean", "description": "Indicates if the camera is on." },
        "micOn": { "type": "boolean", "description": "Indicates if the mic is on." }
      },
      "required": ["uid", "role", "name", "joinedAt", "cameraOn", "micOn"]
    },
    "Ticket": {
      "title": "Ticket",
      "type": "object",
      "description": "Represents a paid ticket for a one-on-one session or a course purchase.",
      "properties": {
        "ticketCode": { "type": "string", "description": "Unique human-readable code for the ticket." },
        "orderId": { "type": "string", "description": "Idempotent unique identifier for the transaction (e.g., from a payment gateway)." },
        "studentId": { "type": "string", "description": "UID of the student who bought the ticket." },
        "teacherId": { "type": "string", "description": "UID of the teacher for whom the ticket is valid." },
        "status": { "type": "string", "enum": ["PAID", "WAITING_FOR_TEACHER", "ACTIVE", "COMPLETED", "CANCELLED", "REFUND_PROCESSED"], "description": "The current state of the ticket lifecycle." },
        "price": { "type": "number", "description": "The original cost of the item." },
        "finalPrice": { "type": "number", "description": "The final price paid after discounts." },
        "appliedPromoCode": { "type": "string", "description": "The promo code used for this purchase, if any." },
        "duration": { "type": "number", "description": "Session duration in minutes." },
        "commissionPercent": { "type": "number", "description": "Platform commission percentage." },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of ticket creation." },
        "validFrom": { "type": "string", "format": "date-time", "description": "The timestamp from which the ticket is valid (session start - 15m)." },
        "validTill": { "type": "string", "format": "date-time", "description": "The timestamp until which the ticket is valid (session end + 30m)." },
        "used": { "type": "boolean", "description": "Indicates if the ticket has been consumed to join a meeting." },
        "checkInTime": { "type": "string", "format": "date-time", "description": "Timestamp when the student checked into the meeting." },
        "activatedAt": { "type": "string", "format": "date-time", "description": "Timestamp when the session became active." },
        "endedAt": { "type": "string", "format": "date-time", "description": "Timestamp when the session ended." },
        "refundable": { "type": "boolean", "description": "Indicates if the ticket is eligible for a refund." },
        "cancelReason": { "type": "string", "enum": ["TEACHER_NO_SHOW"], "description": "Reason for cancellation, if any." },
        "endedBy": { "type": "string", "enum": ["TEACHER", "STUDENT", "SYSTEM"], "description": "Who or what ended the session." },
        "saleType": { "type": "string", "enum": ["SESSION", "COURSE"], "description": "The type of sale this ticket represents." },
        "courseId": { "type": "string", "description": "ID of the course purchased, if applicable." },
        "courseTitle": { "type": "string", "description": "Title of the course purchased, if applicable." }
      },
      "required": ["ticketCode", "orderId", "studentId", "teacherId", "status", "price", "duration", "createdAt", "validFrom", "validTill", "used"]
    },
    "WhiteboardStroke": {
      "title": "Whiteboard Stroke",
      "description": "A single drawing action on a whiteboard.",
      "type": "object",
      "properties": {
        "points": {
          "type": "array",
          "items": { "type": "object", "properties": { "x": { "type": "number" }, "y": { "type": "number" } }, "required": ["x", "y"] }
        },
        "tool": { "type": "string", "enum": ["pen", "eraser", "shape", "text"] },
        "shape": { "type": "string", "enum": ["rectangle", "circle", "line", "arrow", null] },
        "color": { "type": "string" },
        "size": { "type": "number" },
        "timestamp": { "type": "string", "format": "date-time" }
      },
      "required": ["points", "tool", "color", "size", "timestamp"]
    }
  },
  "auth": {
    "providers": ["password", "google.com"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{uid}",
        "definition": { "entityName": "User", "schema": { "$ref": "#/backend/entities/User" }, "description": "Stores user profile information, including their role.", "params": [{ "name": "uid", "description": "The unique identifier of the user." }] }
      },
       {
        "path": "/promoCodes/{code}",
        "definition": { "entityName": "PromoCode", "schema": { "$ref": "#/backend/entities/PromoCode" }, "description": "Stores active promotional codes.", "params": [{ "name": "code", "description": "The unique promotional code." }] }
      },
       {
        "path": "/tutors/{tutorId}",
        "definition": {
          "entityName": "PublicTutorProfile",
          "schema": { "$ref": "#/backend/entities/PublicTutorProfile" },
          "description": "Stores public-facing profiles for tutors. Read-only for students, writable only by the tutor themselves.",
          "params": [{ "name": "tutorId", "description": "The unique identifier of the tutor, matching their auth UID." }]
        }
      },
      {
        "path": "/courses/{courseId}",
        "definition": { "entityName": "Course", "schema": { "$ref": "#/backend/entities/Course" }, "description": "Stores course information created by teachers.", "params": [{ "name": "courseId", "description": "The unique identifier of the course." }] }
      },
      {
        "path": "/courses/{courseId}/modules/{moduleId}",
        "definition": { "entityName": "Module", "schema": { "$ref": "#/backend/entities/Module" }, "description": "Stores modules for a specific course.", "params": [{ "name": "courseId", "description": "The ID of the parent course." }, { "name": "moduleId", "description": "The unique identifier of the module." }] }
      },
      {
        "path": "/courses/{courseId}/modules/{moduleId}/lessons/{lessonId}",
        "definition": { "entityName": "Lesson", "schema": { "$ref": "#/backend/entities/Lesson" }, "description": "Stores lessons for a specific module.", "params": [{ "name": "courseId", "description": "The ID of the parent course." }, { "name": "moduleId", "description": "The ID of the parent module." }, { "name": "lessonId", "description": "The unique identifier of the lesson." }] }
      },
      {
        "path": "/meetings/{meetingCode}",
        "definition": { "entityName": "Meeting", "schema": { "$ref": "#/backend/entities/Meeting" }, "description": "Stores meeting metadata, linking a human-readable code to a unique room ID.", "params": [{ "name": "meetingCode", "description": "The unique, human-readable meeting code." }] }
      },
      {
        "path": "/participants/{meetingRoomId}/users/{uid}",
        "definition": { "entityName": "Participant", "schema": { "$ref": "#/backend/entities/Participant" }, "description": "Acts as a real-time presence list for each meeting room.", "params": [{ "name": "meetingRoomId", "description": "The unique identifier for the meeting room (UUID)." }, { "name": "uid", "description": "The unique identifier of the user participating." }] }
      },
      {
        "path": "/tickets/{ticketId}",
        "definition": { "entityName": "Ticket", "schema": { "$ref": "#/backend/entities/Ticket" }, "description": "Stores information about a paid session ticket.", "params": [{ "name": "ticketId", "description": "The unique identifier of the ticket document." }] }
      },
      {
        "path": "/whiteboards/{meetingId}/strokes/{strokeId}",
        "definition": { "entityName": "WhiteboardStroke", "schema": { "$ref": "#/backend/entities/WhiteboardStroke" }, "description": "Stores individual drawing strokes for a meeting's whiteboard.", "params": [{ "name": "meetingId", "description": "The unique identifier of the meeting." }, { "name": "strokeId", "description": "The unique identifier of the whiteboard stroke." }] }
      }
    ]
  }
}
